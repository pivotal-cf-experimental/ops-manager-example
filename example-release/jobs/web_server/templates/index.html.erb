<html>
  <body>
    <h1>Hello World</h1>

    <h2>Persistent disk time log</h2>
    <p>
      <a href="/logs/time.log">/logs/time.log</a>
    </p>

    <h2>Link info</h2>
    <%
      link('web_server_info').instances.map do |instance|
    %>
    <dl>
      <dt>name</dt><dd><%= instance.name %></dd>
      <dt>id</dt><dd><%= instance.id %></dd>
      <dt>index</dt><dd><%= instance.index %></dd>
      <dt>az</dt><dd><%= instance.az %></dd>
      <dt>address</dt><dd><%= instance.address %></dd>
    </dl>
    <% end %>

    <h2>Product Accessors:</h2>
    <dl>
      <% [
             'product.deployment_name',
             'product.network_name',
         ].each do |property| %>
        <dt><%= property %></dt>
        <dd><%= p(property) %></dd>
      <% end %>
    </dl>

    <h2>Self Accessors:</h2>
    <dl>
      <% [
             'self.stemcell_version',
         ].each do |property| %>
        <dt><%= property %></dt>
        <dd><%= p(property) %></dd>
      <% end %>
    </dl>

    <h2>Credhub Values:</h2>
    <dl>
      <% [
             'credhub.password',
             'credhub.concatenated_password'
         ].each do |property| %>
        <dt><%= property %></dt>
        <dd><pre><%= p(property) %></pre></dd>
      <% end %>
    </dl>

    <h2>Generated values:</h2>
    <dl>
    <% [
        'generated.rsa_cert_credentials.present',
        'generated.rsa_cert_credentials.private_key_pem',
        'generated.rsa_cert_credentials.cert_pem',
        'generated.rsa_cert_credentials.public_key_pem',
        'generated.rsa_cert_credentials.cert_and_private_key_pems',
        'generated.rsa_pkey_credentials.present',
        'generated.rsa_pkey_credentials.public_key_pem',
        'generated.rsa_pkey_credentials.private_key_pem',
        'generated.rsa_pkey_credentials.public_key_openssh',
        'generated.rsa_pkey_credentials.public_key_fingerprint',
        'generated.salted_credentials.present',
        'generated.salted_credentials.sha512_hashed_password',
        'generated.salted_credentials.identity',
        'generated.salted_credentials.salt',
        'generated.salted_credentials.password',
        'generated.simple_credentials.present',
        'generated.simple_credentials.identity',
        'generated.simple_credentials.password',
        'generated.secret.present',
        'generated.secret.value',
        'generated.uuid',
        'generated.root_rsa_certificate',
      ].each do |property| %>
      <dt><%= property %></dt>
      <dd><pre><%= p(property) %></pre></dd>
    <% end %>
    </dl>

    <h2>Generated values to migrate to credhub during upgrade to the next version of the example tile:</h2>
    <dl>
      <% [
             'generated.for_migration_to_credhub.rsa_cert_credentials.public_key_pem',
             'generated.for_migration_to_credhub.rsa_cert_credentials.cert_and_private_key_pems',
             'generated.for_migration_to_credhub.rsa_pkey_credentials.public_key_pem',
             'generated.for_migration_to_credhub.rsa_pkey_credentials.private_key_pem',
             'generated.for_migration_to_credhub.rsa_pkey_credentials.public_key_openssh',
             'generated.for_migration_to_credhub.rsa_pkey_credentials.public_key_fingerprint',
             'generated.for_migration_to_credhub.salted_credentials.sha512_hashed_password',
             'generated.for_migration_to_credhub.salted_credentials.identity',
             'generated.for_migration_to_credhub.salted_credentials.salt',
             'generated.for_migration_to_credhub.salted_credentials.password',
             'generated.for_migration_to_credhub.simple_credentials.identity',
             'generated.for_migration_to_credhub.simple_credentials.password',
             'generated.for_migration_to_credhub.secret',
         ].each do |property| %>
        <dt><%= property %></dt>
        <dd><pre><%= p(property) %></pre></dd>
      <% end %>
    </dl>

    <h2>Values from credhub:</h2>
    <dl>
      <% [
             'migrated_to_credhub.secret',
             'migrated_to_credhub.rsa_public_key',
             'migrated_to_credhub.rsa_private_key',
             'migrated_to_credhub.simple_creds_username',
             'migrated_to_credhub.simple_creds_password',
             'migrated_to_credhub.salted_creds_username',
             'migrated_to_credhub.salted_creds_password',
         ].each do |property| %>
        <dt><%= property %></dt>
        <dd><pre><%= p(property) %></pre></dd>
      <% end %>
    </dl>

    <h2>Configured values:</h2>
    <dl>
    <% [
        'configured.string',
        'configured.integer',
        'configured.boolean',
        'configured.dropdown',
        'configured.domain',
        'configured.wildcard_domain',
        'configured.string_list',
        'configured.text',
        'configured.ldap_url',
        'configured.email',
        'configured.http_url',
        'configured.ip_address',
        'configured.ip_ranges.value',
        'configured.ip_ranges.parsed_ip_ranges',
        'configured.multi_select_options',
        'configured.network_address_list.value',
        'configured.network_address_list.parsed_network_addresses',
        'configured.network_address',
        'configured.port',
        'configured.smtp_authentication',
        'configured.ca_certificate',
        'configured.example_vm_type_dropdown_value',
        'configured.example_disk_type_dropdown_value',
        'configured.record_collection',
        'configured.selector',
        'configured.selector_specific_option',
        'configured.selector_value',
        'configured.stemcell_selector',
        'configured.top_level_secret',
        'configured.concat_secrets',
        'configured.secret',
        'configured.secret_ternary',
        'configured.secret_or',
        'configured.rsa_cert_credentials.public_key_pem',
        'configured.rsa_cert_credentials.cert_and_private_key_pems',
        'configured.simple_credentials.identity',
        'configured.simple_credentials.password',
      ].each do |property| %>
        <dt><%= property %></dt>
        <dd>
          <% if_p(property) do |prop| %>
            <pre><%= prop.inspect %></pre>
          <% end %>
        </dd>
    <% end %>
    </dl>

    <h2>Ops Manager Provided Accessors:</h2>
    <dl>
    <% [
        'ops_manager_provided_accessors.name',
        'ops_manager_provided_accessors.ephemeral_disk',
        'ops_manager_provided_accessors.persistent_disk',
        'ops_manager_provided_accessors.ram',
        'ops_manager_provided_accessors.instances',
        'ops_manager_provided_accessors.any_instances',
       ].each do |property| %>
        <dt><%= property %></dt>
        <dd><%= p(property) %></dd>
    <% end %>
    </dl>

    <h2>Stemcell Selector</h2>
    <dl>
    <% stemcell_selector_properties = ['stemcell_selector.value_present'] %>
    <% stemcell_selector_properties += ['stemcell_selector.value', 'stemcell_selector.os', 'stemcell_selector.version', 'stemcell_selector.assigned'] if p('stemcell_selector.value_present') == true %>
    <% stemcell_selector_properties.each do |property| %>
        <dt><%= property %></dt>
        <dd><%= p(property) %></dd>
    <% end %>
    </dl>

    <h2>Director Provided Accessors:</h2>
    <dl>
    <% [
         'director_provided_accessors.ntp_servers',
         'director_provided_accessors.ca_public_key',
         'director_provided_accessors.tld',
         'director_provided_accessors.bosh_metrics_forwarder_client_name',
         'director_provided_accessors.bosh_metrics_forwarder_client_secret',
       ].each do |property| %>
        <dt><%= property %></dt>
        <dd><pre><%= p(property) %></pre></dd>
    <% end %>
    </dl>

    <h2>Compatibility Checks</h2>
    <dl>
      <dt>Allow use of Object#present? ?</dt>
      <dd>
        <%= p('configured.integer').present? ? 'available' : '' %><br /><br />
        We were unintentionally allowing the use of `Object#present?` provided by ActiveSupport because the Director included other gems that indirectly required ActiveSupport. When we updated to ActiveSupport 7.1.0, this broke and caused template rendering to fail for the Healthwatch tile.
      </dd>
    </dl>
  </body>
</html>
